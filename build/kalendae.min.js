/********************************************************************
 *	Kalendae, a framework agnostic javascript date picker           *
 *	Copyright(c) 2012 Jarvis Badgley (chipersoft@gmail.com)         *
 *	http://github.com/ChiperSoft/Kalendae                           *
 *	Version 0.2.6                                                   *
 ********************************************************************/

(function(N){var t,q=function(a,b){if("function"===typeof document.addEventListener){var d=!1;try{d=a instanceof Element}catch(f){d=!!a&&1===d.nodeType}d||"string"===typeof a||(b=a);var c=this,h=c.classes,g=c.settings=e.merge(c.defaults,{attachTo:a},b||{}),d=c.container=e.make("div",{"class":h.container}),q=c.calendars=[],w=l().day(g.weekStart),n,p=[],k,m,A;k=[];var t;m=0;n=g.months;e.isIE8()&&e.addClassName(d,"ie8");for(m=7;m--;)p.push(w.format("ddd").substr(0,g.columnHeaderLength)),w.add("days",
1);D(c);if("object"===typeof g.subscribe)for(m in g.subscribe)g.subscribe.hasOwnProperty(m)&&c.subscribe(m,g.subscribe[m]);c._sel=[];g.selected&&c.setSelected(g.selected,!1);n=g.viewStartDate?l(g.viewStartDate,g.format):0<c._sel.length?l(c._sel[0]):l();c.viewStartDate=n.date(1);(n={past:g.months-1,"today-past":g.months-1,any:2<g.months?Math.floor(g.months/2):0,"today-future":0,future:0}[this.settings.direction])&&l().month()==l(c.viewStartDate).month()&&(c.viewStartDate=l(c.viewStartDate).subtract({M:n}).date(1));
if("function"===typeof g.blackout)c.blackout=g.blackout;else if(g.blackout){var y=B(g.blackout,g.parseSplitDelimiter);c.blackout=function(a){a=l(a).yearDay();if(1>a||!c._sel||1>c._sel.length)return!1;for(var d=y.length;d--;)if(y[d].yearDay()===a)return!0;return!1}}else c.blackout=function(){return!1};c.direction=c.directions[g.direction]?c.directions[g.direction]:c.directions.any;for(n=Math.max(g.months,1);n--;){k=e.make("div",{"class":h.calendar},d);k.setAttribute("data-cal-index",n);1<g.months&&
(n==Math.max(g.months-1,1)?e.addClassName(k,h.monthFirst):0===n?e.addClassName(k,h.monthLast):e.addClassName(k,h.monthMiddle));m=e.make("div",{"class":h.title},k);e.make("a",{"class":h.previousYear},m);e.make("a",{"class":h.previousMonth},m);e.make("a",{"class":h.nextYear},m);e.make("a",{"class":h.nextMonth},m);w=e.make("span",{"class":h.caption},m);A=e.make("div",{"class":h.header},k);m=0;do t=e.make("span",{},A),t.innerHTML=p[m];while(7>++m);A=e.make("div",{"class":h.days},k);m=0;for(k=[];42>m++;)k.push(e.make("span",
{},A));q.push({caption:w,days:k});n&&e.make("div",{"class":h.monthSeparator},d)}c.draw();e.addEvent(d,"mousedown",function(a,d){var b;if(e.hasClassName(d,h.nextMonth))c.disableNext||!1===c.publish("view-changed",c,["next-month"])||(c.viewStartDate.add("months",1),c.draw());else if(e.hasClassName(d,h.previousMonth))c.disablePreviousMonth||!1===c.publish("view-changed",c,["previous-month"])||(c.viewStartDate.subtract("months",1),c.draw());else if(e.hasClassName(d,h.nextYear))c.disableNext||!1===c.publish("view-changed",
c,["next-year"])||(c.viewStartDate.add("years",1),c.draw());else if(e.hasClassName(d,h.previousYear))c.disablePreviousMonth||!1===c.publish("view-changed",c,["previous-year"])||(c.viewStartDate.subtract("years",1),c.draw());else if(e.hasClassName(d.parentNode,h.days)&&e.hasClassName(d,h.dayActive)&&(b=d.getAttribute("data-date"))&&(b=l(b,g.dayAttributeFormat).add("hours",12),!1!==c.publish("date-clicked",c,[b])))switch(g.mode){case "multiple":c.addSelected(b)||c.removeSelected(b);break;case "range":c.addSelected(b);
break;default:c.addSelected(b)}return!1});(g.attachTo=e.$(g.attachTo))&&g.attachTo.appendChild(d)}};q.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:!1,format:null,subscribe:null,columnHeaderLength:2,titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",dateClassMap:{}},
classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",
disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(a){return l(a).yearDay()>=t.yearDay()},"today-past":function(a){return l(a).yearDay()>t.yearDay()},any:function(a){return!1},"today-future":function(a){return l(a).yearDay()<t.yearDay()},future:function(a){return l(a).yearDay()<=t.yearDay()}},getSelectedAsDates:function(){for(var a=
[],b=0,d=this._sel.length;b<d;b++)a.push(this._sel[b].toDate());return a},getSelectedAsText:function(a){for(var b=[],d=0,f=this._sel.length;d<f;d++)b.push(this._sel[d].format(a||this.settings.format||"YYYY-MM-DD"));return b},getSelectedRaw:function(){for(var a=[],b=0,d=this._sel.length;b<d;b++)a.push(l(this._sel[b]));return a},getSelected:function(a){a=this.getSelectedAsText(a);switch(this.settings.mode){case "range":return a.splice(2),a.join(this.settings.rangeDelimiter);case "multiple":return a.join(this.settings.multipleDelimiter);
default:return a[0]}},isSelected:function(a){a=l(a).yearDay();if(1>a||!this._sel||1>this._sel.length)return!1;switch(this.settings.mode){case "range":var b=this._sel[0]?this._sel[0].yearDay():0,d=this._sel[1]?this._sel[1].yearDay():0;return b===a||d===a?1:b&&d?a>b&&a<d||b<d&&a<b&&a>d?-1:!1:0;case "multiple":for(b=this._sel.length;b--;)if(this._sel[b].yearDay()===a)return!0;return!1;default:return this._sel[0]&&this._sel[0].yearDay()===a}},setSelected:function(a,b){this._sel=B(a,this.settings.parseSplitDelimiter,
this.settings.format);this._sel.sort(function(a,b){return a.yearDay()-b.yearDay()});!1!==b&&this.draw()},addSelected:function(a,b){a=l(a).hours(12);switch(this.settings.mode){case "multiple":if(this.isSelected(a))return!1;this._sel.push(a);break;case "range":1!==this._sel.length?this._sel=[a]:a.yearDay()>this._sel[0].yearDay()?this._sel[1]=a:this._sel=[a,this._sel[0]];break;default:this._sel=[a]}this._sel.sort(function(a,b){return a.yearDay()-b.yearDay()});this.publish("change",this);!1!==b&&this.draw();
return!0},removeSelected:function(a,b){a=l(a).yearDay();for(var d=this._sel.length;d--;)if(this._sel[d].yearDay()===a)return this._sel.splice(d,1),this.publish("change",this),!1!==b&&this.draw(),!0;return!1},draw:function(){var a=l(this.viewStartDate).hours(12),b,d=this.classes,f,c,h,g=0,q,w=0,n,p=this.settings;q=this.calendars.length;do{b=l(a).date(1);b.day(b.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart);f=this.calendars[g];f.caption.innerHTML=a.format(this.settings.titleFormat);
w=0;do c=f.days[w],h=[],(n=this.isSelected(b))&&h.push({"-1":d.dayInRange,1:d.daySelected,"true":d.daySelected}[n]),b.month()!=a.month()?h.push(d.dayOutOfMonth):h.push(d.dayInMonth),(!(this.blackout(b)||this.direction(b)||b.month()!=a.month()&&!1===p.dayOutOfMonthClickable)||0<n)&&h.push(d.dayActive),b.yearDay()===t.yearDay()&&h.push(d.dayToday),n=b.format(this.settings.dayAttributeFormat),p.dateClassMap[n]&&h.push(p.dateClassMap[n]),c.innerHTML=b.format(p.dayNumberFormat),c.className=h.join(" "),
c.setAttribute("data-date",n),b.add("days",1);while(42>++w);a.add("months",1)}while(++g<q);if(p.directionScrolling){b=-l().diff(a,"months");if("today-past"===p.direction||"past"===p.direction)0>b?(this.disableNextMonth=!1,e.removeClassName(this.container,d.disableNextMonth)):(this.disableNextMonth=!0,e.addClassName(this.container,d.disableNextMonth));else if("today-future"===p.direction||"future"===p.direction)b>=p.months?(this.disablePreviousMonth=!1,e.removeClassName(this.container,d.disablePreviousMonth)):
(this.disablePreviousMonth=!0,e.addClassName(this.container,d.disablePreviousMonth));if("today-past"===p.direction||"past"===p.direction)0>=a.add({y:1}).diff(l(),"months")?(this.disableNextYear=!1,e.removeClassName(this.container,d.disableNextYear)):(this.disableNextYear=!0,e.addClassName(this.container,d.disableNextYear));else if("today-future"===p.direction||"future"===p.direction)0<=a.subtract({y:1}).diff(l(),"months")-(p.months-1)?(this.disablePreviousYear=!1,e.removeClassName(this.container,
d.disablePreviousYear)):(this.disablePreviousYear=!0,e.addClassName(this.container,d.disablePreviousYear))}}};var B=function(a,b,d){var f=[];"string"===typeof a?a=a.split(b):e.isArray(a)||(a=[a]);b=a.length;i=0;do a[i]&&f.push(l(a[i],d).add("hours",12));while(++i<b);return f};window.Kalendae=q;var e=q.util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},$:function(a){return"string"==
typeof a?document.getElementById(a):a},$$:function(a){return document.querySelectorAll(a)},make:function(a,b,d){var f;a=document.createElement(a);if(b)for(f in b)b.hasOwnProperty(f)&&a.setAttribute(f,b[f]);d&&d.appendChild(a);return a},isVisible:function(a){return 0<a.offsetWidth||0<a.offsetHeight},getStyle:function(a,b){var d;a.currentStyle?d=a.currentStyle[b]:window.getComputedStyle&&(d=window.getComputedStyle(a,null)[b]);return d},domReady:function(a){/in/.test(document.readyState)?setTimeout(function(){e.domReady(a)},
9):a()},addEvent:function(a,b,d){var f=function(b){b=b||window.event;var f=d.apply(a,[b,b.target||b.srcElement]);!1===f&&(b.preventDefault?b.preventDefault():(b.returnValue=!1,b.cancelBubble=!0));return f};a.attachEvent?a.attachEvent("on"+b,f):a.addEventListener(b,f,!1);return f},removeEvent:function(a,b,d){a.detachEvent?a.detachEvent("on"+b,d):a.removeEventListener(b,d,!1)},hasClassName:function(a,b){if(!(a=e.$(a)))return!1;var d=a.className;return 0<d.length&&(d==b||RegExp("(^|\\s)"+b+"(\\s|$)").test(d))},
addClassName:function(a,b){(a=e.$(a))&&!e.hasClassName(a,b)&&(a.className+=(a.className?" ":"")+b)},removeClassName:function(a,b){if(a=e.$(a))a.className=e.trimString(a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))},isFixed:function(a){do if("fixed"===e.getStyle(a,"position"))return!0;while(a=a.offsetParent);return!1},scrollContainer:function(a){do{var b=e.getStyle(a,"overflow");if("auto"===b||"scroll"===b)return a}while((a=a.parentNode)&&a!=window.document.body);return null},getPosition:function(a,
b){var d=a.offsetLeft,f=a.offsetTop,c={};if(!b)for(;a=a.offsetParent;)d+=a.offsetLeft,f+=a.offsetTop;c[0]=c.left=d;c[1]=c.top=f;return c},getHeight:function(a){return a.offsetHeight||a.scrollHeight},getWidth:function(a){return a.offsetWidth||a.scrollWidth},trimString:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){for(var a=!0===arguments[0],b={},d=a?1:0;d<arguments.length;d++){var f=b,c=arguments[d];if("object"===typeof c){var e=void 0;for(e in c)c.hasOwnProperty(e)&&
(a&&"object"===typeof f[e]&&"object"===typeof c[e]?_update(f[e],c[e]):f[e]=c[e])}}return b},isArray:function(a){return!(!a||!a.length||0===a.length||"object"!==typeof a||!a.constructor||a.nodeType||a.item)}};"function"===typeof document.addEventListener&&q.util.domReady(function(){for(var a=e.$$(".auto-kal"),b=a.length,d,f;b--;)d=a[b],f=d.getAttribute("data-kal"),f=null==f||""==f?{}:(new Function("return {"+f+"};"))(),"INPUT"===d.tagName?new q.Input(d,f):new q(e.merge(f,{attachTo:d}))});q.Input=function(a,
b){if("function"===typeof document.addEventListener){var d=this.input=e.$(a),f;if(!d||"INPUT"!==d.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var c=this,h=c.classes;opts=c.settings=e.merge(c.defaults,b);opts.attachTo=window.document.body;opts.selected?f=!0:opts.selected=d.value;q.call(c,opts);if(opts.closeButton){var g=e.make("a",{"class":h.closeButton},c.container);e.addEvent(g,"click",function(){d.blur()})}f&&(d.value=c.getSelected());f=c.container;
var l=!1;f.style.display="none";e.addClassName(f,h.positioned);e.addEvent(f,"mousedown",function(a,d){l=!0});e.addEvent(window.document,"mousedown",function(a,d){l=!1});e.addEvent(d,"focus",function(){c.setSelected(this.value);c.show()});e.addEvent(d,"blur",function(){l?(l=!1,d.focus()):c.hide()});e.addEvent(d,"keyup",function(a){c.setSelected(this.value)});(h=e.scrollContainer(d))&&e.addEvent(h,"scroll",function(a){d.blur()});c.subscribe("change",function(){d.value=c.getSelected()})}};q.Input.prototype=
e.merge(q.prototype,{defaults:e.merge(q.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:e.merge(q.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var a=this.container,b=a.style,d=this.input,f=e.getPosition(d),c=e.scrollContainer(d),c=c?c.scrollTop:0;b.display="";switch(opts.side){case "left":b.left=f.left-e.getWidth(a)+this.settings.offsetLeft+"px";b.top=f.top+this.settings.offsetTop-c+"px";break;case "right":b.left=
f.left+e.getWidth(d)+"px";b.top=f.top+this.settings.offsetTop-c+"px";break;case "top":b.left=f.left+this.settings.offsetLeft+"px";b.top=f.top-e.getHeight(a)+this.settings.offsetTop-c+"px";break;default:b.left=f.left+this.settings.offsetLeft+"px",b.top=f.top+e.getHeight(d)+this.settings.offsetTop-c+"px"}b.position=e.isFixed(d)?"fixed":"absolute"},hide:function(){this.container.style.display="none"}});var D=function(a){a||(a=this);var b=a.c_||{};a.publish=function(a,e,c){for(var h=(a=b[a])?a.length:
0,g;h--;)if(g=a[h].apply(e,c||[]),"boolean"===typeof g)return g};a.subscribe=function(a,e,c){b[a]||(b[a]=[]);c?b[a].push(e):b[a].unshift(e);return[a,e]};a.unsubscribe=function(a){var e=b[a[0]];a=a[1];for(var c=e?e.length:0;c--;)e[c]===a&&e.splice(c,1)}},l=q.moment=function(a,b){function d(a,b){this._d=a;this._isUTC=!!b}function e(a,b){for(var d=a+"";d.length<b;)d="0"+d;return d}function c(v,b,d,c){var e="string"===typeof b,f=e?{}:b;e&&c&&(f[b]=+c);b=(f.ms||f.milliseconds||0)+1E3*(f.s||f.seconds||
0)+6E4*(f.m||f.minutes||0)+36E5*(f.h||f.hours||0);c=(f.d||f.days||0)+7*(f.w||f.weeks||0);f=(f.M||f.months||0)+12*(f.y||f.years||0);b&&v.setTime(+v+b*d);c&&v.setDate(v.getDate()+c*d);f&&(b=v.getDate(),v.setDate(1),v.setMonth(v.getMonth()+f*d),v.setDate(Math.min((new a(v.getFullYear(),v.getMonth()+1,0)).getDate(),b)));return v}function h(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(b){return new a(b[0],b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0)}function l(b,d){function c(d){var C;
switch(d){case "M":return x+1;case "Mo":return x+1+s(x+1);case "MM":return e(x+1,2);case "MMM":return k.monthsShort[x];case "MMMM":return k.months[x];case "D":return g;case "Do":return g+s(g);case "DD":return e(g,2);case "DDD":return d=new a(h,x,g),C=new a(h,0,1),~~((d-C)/864E5+1.5);case "DDDo":return d=c("DDD"),d+s(d);case "DDDD":return e(c("DDD"),3);case "d":return m;case "do":return m+s(m);case "ddd":return k.weekdaysShort[m];case "dddd":return k.weekdays[m];case "w":return d=new a(h,x,g-m+5),
C=new a(d.getFullYear(),0,4),~~((d-C)/864E5/7+1.5);case "wo":return d=c("w"),d+s(d);case "ww":return e(c("w"),2);case "YY":return e(h%100,2);case "YYYY":return h;case "a":return 11<u?r.pm:r.am;case "A":return 11<u?r.PM:r.AM;case "H":return u;case "HH":return e(u,2);case "h":return u%12||12;case "hh":return e(u%12||12,2);case "m":return q;case "mm":return e(q,2);case "s":return n;case "ss":return e(n,2);case "zz":case "z":return(b._d.toString().match(I)||[""])[0].replace(J,"");case "Z":return(0>p?
"-":"+")+e(~~(Math.abs(p)/60),2)+":"+e(~~(Math.abs(p)%60),2);case "ZZ":return(0>p?"-":"+")+e(~~(10*Math.abs(p)/6),4);case "L":case "LL":case "LLL":case "LLLL":case "LT":return l(b,k.longDateFormat[d]);default:return d.replace(/(^\[)|(\\)|\]$/g,"")}}var x=b.month(),g=b.date(),h=b.year(),m=b.day(),u=b.hours(),q=b.minutes(),n=b.seconds(),p=-b.zone(),s=k.ordinal,r=k.meridiem;return d.replace(H,c)}function q(b,d){var c=[0,0,1,0,0,0,0],e=0,f=0,h=!1,l=b.match(E),m=d.match(K),p=Math.min(l.length,m.length),
n,t;for(n=0;n<p;n++){var s=l[n],r=void 0;switch(m[n]){case "M":case "MM":c[1]=~~s-1;break;case "MMM":case "MMMM":for(r=0;12>r;r++)if(k.monthsParse[r].test(s)){c[1]=r;break}break;case "D":case "DD":case "DDD":case "DDDD":c[2]=~~s;break;case "YY":s=~~s;c[0]=s+(70<s?1900:2E3);break;case "YYYY":c[0]=~~Math.abs(s);break;case "a":case "A":t="pm"===s.toLowerCase();break;case "H":case "HH":case "h":case "hh":c[3]=~~s;break;case "m":case "mm":c[4]=~~s;break;case "s":case "ss":c[5]=~~s;break;case "Z":case "ZZ":h=
!0,(r=(s||"").match(L))&&r[1]&&(e=~~r[1]),r&&r[2]&&(f=~~r[2]),r&&"+"===r[0]&&(e=-e,f=-f)}}t&&12>c[3]&&(c[3]+=12);!1===t&&12===c[3]&&(c[3]=0);c[3]+=e;c[4]+=f;return h?new a(a.UTC.apply({},c)):g(c)}function n(a,b,d){var c=k.relativeTime[a];return"function"===typeof c?c(b||1,!!d,a):c.replace(/%d/i,b||1)}function p(a,b){k.fn[a]=function(a){var d=this._isUTC?"UTC":"";return"undefined"!==typeof a?(this._d["set"+d+b](a),this):this._d["get"+d+b]()}}var k,m=Math.round,t={},B="undefined"!==typeof module,y=
"months monthsShort monthsParse weekdays weekdaysShort longDateFormat calendar relativeTime ordinal meridiem".split(" "),z,D=/^\/?Date\((\-?\d+)/i,H=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,J=/[^A-Z]/g,I=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,K=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,E=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,M=/\d{4}.\d\d.\d\d(T(\d\d(.\d\d(.\d\d)?)?)?([\+\-]\d\d:?\d\d)?)?/,
G=[["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],L=/([\+\-]|\d\d)/gi,F="Month Date Hours Minutes Seconds Milliseconds".split(" ");k=function(c,e){if(null===c||""===c)return null;var f;if(c&&c._d instanceof a)f=new a(+c._d);else if(e)if(h(e)){var k=c.match(E),m=99,n,p,u;for(n=0;n<e.length;n++){p=q(c,e[n]);u=k;for(var t=l(new d(p),e[n]).match(E),y=Math.min(u.length,t.length),z=Math.abs(u.length-t.length),s=0,r=void 0,r=0;r<y;r++)~~u[r]!==~~t[r]&&s++;u=s+z;u<m&&(m=u,f=p)}}else f=
q(c,e);else if(f=D.exec(c),c===b)f=new a;else if(f)f=new a(+f[1]);else if(c instanceof a)f=c;else if(h(c))f=g(c);else if("string"===typeof c)if(f="YYYY-MM-DDT",M.exec(c)){for(k=0;3>k;k++)if(G[k][1].exec(c)){f+=G[k][0];break}f=q(c,f+"Z")}else f=new a(c);else f=new a(c);return new d(f)};k.utc=function(b,c){return h(b)?new d(new a(a.UTC.apply({},b)),!0):c&&b?k(b+" 0",c+" Z").utc():k(b).utc()};k.humanizeDuration=function(a,b,c){a=+a;var d=k.relativeTime;switch(b){case "seconds":a*=1E3;break;case "minutes":a*=
6E4;break;case "hours":a*=36E5;break;case "days":a*=864E5;break;case "weeks":a*=6048E5;break;case "months":a*=2592E6;break;case "years":a*=31536E6;break;default:c=!!b}b=!c;var e=m(Math.abs(a)/1E3),f=m(e/60),h=m(f/60),g=m(h/24),l=m(g/365),e=45>e&&["s",e]||1===f&&["m"]||45>f&&["mm",f]||1===h&&["h"]||22>h&&["hh",h]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",m(g/30)]||1===l&&["y"]||["yy",l];e[2]=b;b=n.apply({},e);return c?(0>=a?d.past:d.future).replace(/%s/i,b):b};k.version="1.5.0";k.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";k.lang=function(a,b){var c,d;d=[];if(b){for(c=0;12>c;c++)d[c]=RegExp("^"+b.months[c]+"|^"+b.monthsShort[c].replace(".",""),"i");b.monthsParse=b.monthsParse||d;t[a]=b}if(t[a])for(c=0;c<y.length;c++)d=y[c],k[d]=t[a][d]||k[d];else B&&(c=require("./lang/"+a),k.lang(a,c))};k.lang("en",{months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",
M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});k.isMoment=function(a){return a instanceof d};k.fn=d.prototype={clone:function(){return k(this)},valueOf:function(){return+this._d},"native":function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},utc:function(){this._isUTC=!0;return this},local:function(){this._isUTC=!1;return this},format:function(a){return l(this,
a?a:k.defaultFormat)},add:function(a,b){this._d=c(this._d,a,1,b);return this},subtract:function(a,b){this._d=c(this._d,a,-1,b);return this},diff:function(a,b,c){a=k(a);var d=6E4*(this.zone()-a.zone()),d=this._d-a._d-d,e=this.year()-a.year(),f=this.month()-a.month();a=this.date()-a.date();b="months"===b?12*e+f+a/30:"years"===b?e+f/12:"seconds"===b?d/1E3:"minutes"===b?d/6E4:"hours"===b?d/36E5:"days"===b?d/864E5:"weeks"===b?d/6048E5:d;return c?b:m(b)},from:function(a,b){return k.humanizeDuration(this.diff(a),
!b)},fromNow:function(a){return this.from(k(),a)},calendar:function(){var a=this.diff(k().sod(),"days",!0),b=k.calendar,c=b.sameElse,a=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"===typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<k([this.year()]).zone()||this.zone()<k([this.year(),5]).zone()},day:function(a){var b=this._d.getDay();return"undefined"===
typeof a?b:this.add({d:a-b})},sod:function(){return this.clone().hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return this.clone().month(this.month()+1).date(0).date()}};for(z=0;z<F.length;z++)p(F[z].toLowerCase(),F[z]);p("year","FullYear");return k}(Date);l.fn.stripTime=function(){this._d=new Date(864E5*Math.floor(this._d.valueOf()/864E5));return this};l.fn.yearDay=
function(a){var b=Math.floor(this._d/864E5);return"undefined"===typeof a?b:this.add({d:a-b})};t=l().stripTime();"undefined"!==typeof jQuery&&"function"===typeof document.addEventListener&&(jQuery.fn.kalendae=function(a){this.each(function(b,d){"INPUT"===d.tagName?$(d).data("kalendae",new q.Input(d,a)):$(d).data("kalendae",new q($.extend({},{attachTo:d},a)))});return this})})();
